<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Invitación — Jairo & Diana</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap');

  :root{
    --verde-oliva:#273526;
    --verde-claro:#97A97C;
    --crema:#e9f5db;
    --bg-panel: rgba(255,255,255,0.92);
  }

  /* MOBILE FIRST */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Playfair Display', serif;
    background:var(--crema);
    color:var(--verde-oliva);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    justify-content:flex-start;
    align-items:flex-start;
    padding:16px;
  }

  main{
    width:100%;
    max-width:760px;
    margin:0 auto;
    background:var(--bg-panel);
    border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,0.12);
    padding:18px;
  }

  /* s1: imagen cuadrada */
  .seccion-1{
    width:100%;
    max-width:360px;
    margin:0 auto;
    aspect-ratio:1/1;
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 10px 26px rgba(0,0,0,0.09);
    background:linear-gradient(180deg, rgba(151,169,124,0.08), rgba(39,53,38,0.02));
    display:block;
  }
  .seccion-1 img{
    width:100%; height:100%; object-fit:cover; display:block;
  }

  /* audio area */
  .seccion-audio{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:8px;
    margin-top:12px;
    margin-bottom:6px;
  }
  .seccion-audio h3{
    margin:0;
    font-family:'Great Vibes',cursive;
    font-size:1.9rem;
    color:var(--verde-oliva);
  }
  .audio-wrap{
    width:100%;
    max-width:420px;
    display:flex;
    justify-content:center;
    position:relative;
  }
  audio{
    width:100%;
    border-radius:10px;
    box-shadow:0 6px 18px rgba(0,0,0,0.08);
  }
  /* fallback big play button */
  .play-overlay{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    pointer-events:none;
  }
  .play-btn{
    pointer-events:auto;
    background:var(--verde-oliva);
    color:var(--crema);
    border:none;
    padding:12px 18px;
    border-radius:40px;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 8px 20px rgba(39,53,38,0.18);
    display:flex;
    gap:10px;
    align-items:center;
    font-size:1rem;
  }

  /* padres: grid responsive */
  .seccion-padres{
    display:grid;
    grid-template-columns:1fr;
    gap:12px;
    margin-top:6px;
    align-items:start;
    text-align:center;
  }
  .padre-col{
    padding:12px;
    border-radius:10px;
    background:linear-gradient(180deg, rgba(233,245,219,0.6), rgba(255,255,255,0.35));
    border:1px solid rgba(151,169,124,0.12);
  }
  .padre-col h2{
    margin:0 0 8px 0;
    font-size:1.1rem;
    color:var(--verde-claro);
    font-weight:600;
  }
  .padre-col p{margin:0;font-weight:700;line-height:1.6;color:var(--verde-oliva)}

  /* invitacion / titulo grande */
  .invitacion{
    background:white;
    padding:18px;
    border-radius:10px;
    box-shadow:0 8px 24px rgba(0,0,0,0.06);
    text-align:center;
  }
  .invitacion h4{margin:0;color:var(--verde-claro);font-weight:500}
  .invitacion .titulo{font-family:'Great Vibes',cursive;font-size:3.6rem;margin:6px 0;color:var(--verde-oliva)}
  .invitacion .fecha{font-weight:700;color:var(--verde-oliva)}

  /* countdown */
  .countdown{
    margin:10px auto;
    display:inline-block;
    background:var(--crema);
    padding:10px 16px;
    border-radius:10px;
    font-weight:700;
    box-shadow:0 8px 20px rgba(0,0,0,0.06);
  }

  /* ubicacion */
  .ubicacion-grid{
    display:grid;
    grid-template-columns:1fr;
    gap:12px;
    margin-top:8px;
  }
  .map-card{background:white;border-radius:10px;padding:10px;box-shadow:0 8px 20px rgba(0,0,0,0.06)}
  .map-card h5{margin:0 0 8px 0;color:var(--verde-claro)}
  .map-card iframe{width:100%;height:220px;border-radius:8px;border:0}

  /* agenda */
  .agenda{
    background:white;border-radius:10px;padding:14px;box-shadow:0 8px 20px rgba(0,0,0,0.06);
  }
  .agenda h5{text-align:center;color:var(--verde-claro);margin-top:0}
  .agenda ul{list-style:none;padding:0;margin:8px 0 0 0}
  .agenda li{display:flex;gap:10px;align-items:center;padding:10px 6px;border-bottom:1px solid rgba(0,0,0,0.04)}
  .agenda li:last-child{border-bottom:0}
  .agenda .time{font-weight:700;width:90px;color:var(--verde-oliva)}
  .icono{width:20px;height:20px;flex-shrink:0;fill:var(--verde-oliva)}

  /* Mensaje personalizado */
  #mensajePersonalizado{margin-top:12px;text-align:center;font-weight:700}

  /* DESKTOP adjustments */
  @media(min-width:720px){
    .seccion-padres{grid-template-columns:1fr 1fr;gap:20px;text-align:left}
    .ubicacion-grid{grid-template-columns:1fr 1fr}
    main{padding:28px}
    .invitacion .titulo{font-size:4.2rem}
    .seccion-1{max-width:420px}
  }
</style>
</head>
<body>
<main>

  <!-- S1: imagen cuadrada (espacio para logo/foto) -->
  <section class="seccion-1" id="mainImage">
    <img src="https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?auto=format&fit=crop&w=1200&q=80" alt="Imagen principal (reemplazar)" />
  </section>

  <!-- audio con encabezado minimalista y fallback play -->
  <section class="seccion-audio" aria-label="Nuestra canción">
    <h3>Nuestra canción</h3>

    <div class="audio-wrap">
      <audio id="weddingAudio" playsinline preload="auto" loop controls>
        <!-- src asignado por JS -->
        Tu navegador no soporta audio.
      </audio>

      <div class="play-overlay" id="playOverlay" style="display:none">
        <button class="play-btn" id="playBtn" aria-label="Reproducir canción">
          ▶ Reproducir nuestra canción
        </button>
      </div>
    </div>
  </section>

  <!-- padres: dos columnas en desktop, apiladas en móvil -->
  <section class="seccion-padres" aria-label="Padres">
    <div class="padre-col">
      <h2>Jairo y Diana</h2>
      <p>Lilian Elizabeth Arce<br/>Luis René Velásquez</p>
    </div>
    <div class="padre-col">
      <h2>&nbsp;</h2>
      <p>Deisy Marina de González<br/>Herbert González</p>
    </div>
  </section>

  <!-- invitacion -->
  <section class="invitacion" aria-label="Invitación">
    <h4>Tenemos el agrado de invitarle a</h4>
    <div class="titulo">Nuestra boda</div>
    <div class="fecha">Sábado 06 de diciembre</div>
  </section>

  <!-- countdown -->
  <div class="countdown" id="countdown" role="timer" aria-live="polite"></div>

  <!-- ubicaciones -->
  <section class="ubicacion-grid" aria-label="Ubicaciones">
    <div class="map-card">
      <h5>Iglesia</h5>
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3875.998233822681!2d-89.20374578569777!3d13.692164990346933!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f63399fdb00e4c3%3A0xb302179fbf0e8a12!2sParroquia%20San%20Miguel%20Arc%C3%A1ngel%20-%20Iglesia%20San%20Miguel%20Arc%C3%A1ngel!5e0!3m2!1ses-419!2ssv!4v1691567891234!5m2!1ses-419!2ssv"
        loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Iglesia"></iframe>
    </div>
    <div class="map-card">
      <h5>Recepción</h5>
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3875.750242816383!2d-89.18943988569823!3d13.70119659010592!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f633aafee0a9c39%3A0x4f0c1c15b6e35ca7!2sCentro%20de%20Convenciones%20San%20Salvador!5e0!3m2!1ses-419!2ssv!4v1691567994567!5m2!1ses-419!2ssv"
        loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Recepción"></iframe>
    </div>
  </section>

  <!-- agenda con iconos -->
  <section class="agenda" aria-label="Agenda">
    <h5>Agenda del Evento</h5>
    <ul>
      <li>
        <svg class="icono" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1a11 11 0 1011 11A11 11 0 0012 1zm1 12h-4V7h2v4h2z"/></svg>
        <div class="time">4:00 PM</div>
        <div>Recepción de invitados</div>
      </li>
      <li>
        <svg class="icono" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3h-1V1h-2v2H8V1H6v2H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zM7 10h10v2H7v-2z"/></svg>
        <div class="time">5:00 PM</div>
        <div>Ceremonia religiosa</div>
      </li>
      <li>
        <svg class="icono" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm1 14h-2v-6h2zm0-8h-2V6h2z"/></svg>
        <div class="time">6:30 PM</div>
        <div>Fotos y cóctel</div>
      </li>
      <li>
        <svg class="icono" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2l2 5h5l-4 3 2 5-4-3-4 3 2-5-4-3h5z"/></svg>
        <div class="time">8:00 PM</div>
        <div>Cena y baile</div>
      </li>
      <li>
        <svg class="icono" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10"/></svg>
        <div class="time">12:00 AM</div>
        <div>Fin del evento</div>
      </li>
    </ul>
  </section>

  <!-- mensaje personalizado por URL -->
  <div id="mensajePersonalizado" aria-live="polite"></div>

</main>

<script>
/* ---------------------------
  CONFIG: pega aquí tu link de Drive
  o deja vacío si vas a cambiar manualmente
----------------------------*/
const driveLink = 'https://drive.google.com/file/d/1V1z985nntar4qYUymdD8CXY79en0HvHx/view?usp=drivesdk';

/* helper: extrae ID del link de drive */
function driveIdFromLink(link){
  if(!link) return '';
  const m = link.match(/\/d\/([a-zA-Z0-9_-]+)/);
  if(m && m[1]) return m[1];
  const alt = (new URL(link)).searchParams.get('id');
  return alt || '';
}

/* construye URL "directa" */
function driveDirectUrl(id){
  if(!id) return '';
  return `https://drive.google.com/uc?export=download&id=${id}`;
}

/* AUDIO: intentar autoplay, si falla mostrar botón */
const audioEl = document.getElementById('weddingAudio');
const playOverlay = document.getElementById('playOverlay');
const playBtn = document.getElementById('playBtn');

/* asigna src si hay driveLink */
const id = driveIdFromLink(driveLink);
if(id){
  audioEl.src = driveDirectUrl(id);
} else {
  // si no hay ID, puedes asignar manualmente aquí
  // audioEl.src = 'https://ejemplo.com/tu-cancion.mp3';
}

/* intenta reproducir (la promesa ayuda a detectar bloqueo) */
function tryAutoplay(){
  const playPromise = audioEl.play();
  if(playPromise !== undefined){
    playPromise.then(()=> {
      // autoplay funcionó
      playOverlay.style.display = 'none';
    }).catch((err)=>{
      // autoplay bloqueado -> mostrar overlay play
      playOverlay.style.display = 'flex';
    });
  } else {
    // navegadores antiguos: mostrar overlay por si acaso
    playOverlay.style.display = 'flex';
  }
}

/* play botón */
if(playBtn){
  playBtn.addEventListener('click', async ()=>{
    try{
      await audioEl.play();
      playOverlay.style.display = 'none';
    }catch(e){
      console.warn('Reproducción falló:', e);
      alert('No fue posible reproducir el audio automáticamente. Por favor toca el botón de reproducir en el reproductor.');
    }
  });
}

/* iniciar intento autoplay tras cargar metadata */
audioEl.addEventListener('canplay', ()=> {
  // try autoplay cuando el navegador permita
  tryAutoplay();
});

/* en algunos casos no dispara canplay (si el archivo bloquea CORS) */
setTimeout(()=>{ tryAutoplay(); }, 900);

/* ---------------------------
  COUNTDOWN (6 diciembre 2025)
----------------------------*/
function actualizarCountdown(){
  const cont = document.getElementById('countdown');
  const ahora = Date.now();
  const boda = new Date('2025-12-06T17:00:00').getTime(); // hora ejemplo 17:00
  const diff = boda - ahora;

  if(diff <= 0){ cont.textContent = '¡Hoy es el gran día!'; return; }
  const dias = Math.floor(diff / (1000*60*60*24));
  const horas = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
  const minutos = Math.floor((diff % (1000*60*60)) / (1000*60));
  cont.textContent = `${dias} días • ${horas} horas • ${minutos} minutos`;
}
actualizarCountdown();
setInterval(actualizarCountdown, 60*1000); // actualiza cada minuto

/* ---------------------------
  Mensaje personalizado por URL
----------------------------*/
function obtenerParametrosURL(){
  const p = new URLSearchParams(window.location.search);
  return {
    nombre: p.get('nombre') || '',
    adultos: parseInt(p.get('adultos')) || 0,
    ninos: parseInt(p.get('ninos')) || 0
  };
}
function mostrarMensajePersonalizado(){
  const {nombre, adultos, ninos} = obtenerParametrosURL();
  const cont = document.getElementById('mensajePersonalizado');
  if(!nombre) { cont.textContent=''; return; }
  const ta = adultos===1? 'adulto':'adultos';
  const tn = ninos===1? 'niño':'niños';
  let m = `Hola ${nombre}, estás invitado con `;
  if(adultos>0) m += `${adultos} ${ta}`;
  if(ninos>0){ m += (adultos>0?' y ':'') + `${ninos} ${tn}`; }
  m += '.';
  cont.innerHTML = `<strong>${m}</strong>`;
}
mostrarMensajePersonalizado();

/* ------------- NOTA IMPORTANTE SOBRE Google Drive -------------
  - Asegúrate de que el archivo en Drive tenga permisos "Cualquiera con el enlace" (Visor).
  - Puedes comprobar que la URL directa funciona abriéndola en la barra del navegador; si descarga o reproduce, está ok.
  - Si Drive bloquea por permisos/CORS, considera alojar el mp3 en:
      - GitHub (raw), Netlify, Vercel o un bucket S3 — son más fiables para streaming.
*/
</script>
</body>
</html>
